{%  extends "base-tornado.html" %}

{%  block headers %}
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html"/>
<title>eve trading</title>
        <link href="{{ static_url('portfolio\chart.css') }}" rel="stylesheet">
        <link href="{{ static_url('portfolio\portfolio.css') }}" rel="stylesheet">
{% end %}

{% block content %}
<div class="container" ng-app="portfolio">

    <div class="row" style="height: 50px"></div>

            <p>Tips: Drag your stocks around rearrange it however you like</p>

			<!-- If the user is not logged in, show generic home page -->
			<div id="portfolioList">
				{% for portfolio in portfolios %}
					<div class="row portfolio-row" id="{{portfolio}}">
						<div class="col-lg-2 summary">
							<strong style="font-size: 200%"><a>{{portfolio.name}}</a></strong>
							<strong style="font-size: 200%">(Portfolio)</strong>
							<br>
						</div>
						<div class="col-lg-5" style="padding: 0">
							<!-- <canvas class="chart" width="300px" height="120px"></canvas> -->
						</div>
						<div class="col-lg-4 news" style="padding-left: 20px">
							<p><strong>Something</strong></p>
						</div>
						<div class="col-lg-1 options">
							<p><a>Edit</a></p>
							<p class="delete"><a>Delete</a></p>
						</div>
						<div class="col-lg-12">
							<hr>
						</div>
					</div>
				{% end %}
			</div> <!-- portfolioList -->

			<div id="stocksList" ng-controller="ListController" ng-init="init({{jsonpickle.encode(stocks)}})">
					<div class="row stock-row" ng-repeat="stock in stocks" id={{!stock.ticker}}>
						<div class="heading">
                            <div ng-model="collapsed" href="#" ng-click="collapsed=!collapsed" class="ng-pristine ng-valid" ng-class="{testheader : collapsed}">
                                <a href={{!"/stock/"+stock.ticker}}><strong ng-bind="stock.ticker"></strong></a>
                            </div>
                        </div>
                        <div id={{!stock.ticker+"panel"}} ng-show="collapsed">
						 <stock-chart ticker='{{!stock.ticker}}' class="col-lg-7 chart" id={{!stock.ticker+"chart"}}></stock-chart>
						<div class="col-lg-4 news" style="padding-left: 20px">
							<p><strong ng-bind="stock.ticker">News</strong></p>
							<ul id="newsList"></ul>
							<div class="col-lg-2">
								<div id="newsNext" style="cursor: pointer">Prev</div>
							</div>
							<div class="col-lg-2">
								<div id="newsPrev" style="cursor: pointer">Next</div>
							</div>
						</div>
						<div class="col-lg-1 options">
							<p><a>Edit</a></p>
							<p class="delete"><a>Delete</a></p>
						</div>
                     </div>
                     <div class="col-lg-12">
                        <hr style="margin-bottom: 10px; margin-top: 10px; border-top: 1px solid #9a9a9a">
                    </div>
					</div>
			</div>	<!-- stocksList -->
            <div style="height:50px"></div>

</div>



{% end %}

{% block footer %}
<div id="notification" class="alert alert-info">Welcome to eve. This is the notification bar</div>
{% end %}

{% block scripts %}
<!--force update-->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://techanjs.org/techan.min.js"></script>
<script src="{{ static_url('portfolio/stockListings.js') }}"></script>
<script src="{{ static_url('portfolio/utils.js') }}"></script>
<script src="{{ static_url('jquery-ui.min.js') }}"></script>
<script src="{{ static_url('underscore.js') }}"></script>
<script src="{{ static_url('angular.min.js') }}"></script>
<script src="{{ static_url('angular.min.js.map') }}"></script>
<script src="{{ static_url('portfolio/controllers.js')}}"></script>
<!--<script>-->
    <!--$('#portfolioNav').addClass('active');-->
    <!--$(document).ready(function() {-->
        <!--var stockString = "{{jsonpickle.encode(stocks)}}".replace(/&quot;/g,'"');-->
        <!--var portfolioString = "{{jsonpickle.encode(portfolios)}}".replace(/&quot;/g,'"');-->
        <!--console.log(JSON.parse(stockString));-->
        <!--stockListings.init({-->
            <!--stocks: JSON.parse(stockString),-->
            <!--portfolios: JSON.parse(portfolioString)-->
        <!--});-->
    <!--});-->
<!--</script>-->
{% end %}